### Vk-Api-Bot
###### Simple bot for VK.com (Spring Boot / Log4j / Lombok)

# 
##### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

<p align="center">
  <img src="https://i.imgur.com/kNShcE2.png" />
</p>

:star: –≠—Ç–æ –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π –±–æ—Ç –¥–ª—è VK, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è :bell: –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç. 
–õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ø—Ä–∏—Ö–æ–¥—è—à–∏–µ –æ—à–∏–±–∫–∏. 
+ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ª–æ–≥–∏ :scroll: –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ–±—ã –ª–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ —Ñ–∞–π–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ ___log4j.propetyies___.
+ –ë—ã–ª —Å–æ–∑–¥–∞–Ω –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å Response, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–≤–µ—Ç–∞. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å - –Ω–∞—à–µ –≤—Å—ë. –ü–æ-—Ö–æ—Ä–æ—à–µ–º—É –µ—Å—Ç—å —Å–º—ã—Å–ª –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å –∏ - _–∫–ª–∞—Å—Å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è_ –∏–ª–∏ _–¥–∞–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —É–∂–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–µ–Ω—ã—Ö "–∫–æ–º–∞–Ω–¥"_. –°–º—ã—Å–ª–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É—Å–ª–æ–∂–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É–∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —è –Ω–µ –≤–∏–¥–µ–ª, –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ—Å—Ç–≤–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–∏–ª _–ø–æ–ª–µ_ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ üé®.

##### –í DEBUG —Ä–µ–∂–∏–º–µ:
```
DEBUG	2021-08-02 23:41:41,864	1	com.tasks.test.vkapibot.service.VkApiService	[http-nio-9999-exec-1]	Received: type: 'MESSAGE_NEW', body: 'Hello', from user_id: 17213748
DEBUG	2021-08-02 23:41:42,478	615	com.tasks.test.vkapibot.response.Response	[http-nio-9999-exec-1]	GET https://api.vk.com/method/messages.send?message=%D0%92%D1%8B+%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BB%D0%B8%3A+Hello&peer_id=17213748&access_token=d38dadbd481a828a21a253e5ef85ab5a...7dff903593&v=5.89&random_id=-54874627 HTTP/1.1
DEBUG	2021-08-02 23:41:42,484	621	com.tasks.test.vkapibot.response.Response	[http-nio-9999-exec-1]	Received: {"response":91}
DEBUG	2021-08-02 23:41:42,707	844	com.tasks.test.vkapibot.service.VkApiService	[http-nio-9999-exec-2]	Received: type: 'MESSAGE_REPLY', body: '–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: Hello', to user_id: 17213748
```

##### –ü–æ–ª—É—á–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –±–æ—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
ERROR	2021-08-02 23:28:05,074	678	com.tasks.test.vkapibot.response.Response	[http-nio-9999-exec-1]	Received an error: 'User authorization failed: invalid access_token (4).' with code [5]
The following request parameters were passed:
[ {
  "key" : "peer_id",
  "value" : "1713748"
}, {
  "key" : "v",
  "value" : "5.89"
}, {
  "key" : "random_id",
  "value" : "1750887011"
}, {
  "key" : "method",
  "value" : "messages.send"
}, {
  "key" : "oauth",
  "value" : "1"
} ]
```

#
##### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```.
‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ src/main
‚îÇ    ‚îú‚îÄ‚îÄ java
‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ com/tasks/test/vkapibot
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ controller             
‚îÇ    ‚îÇ            ‚îÇ    ‚îî‚îÄ‚îÄ VkApiController.java
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ entities
‚îÇ    ‚îÇ            ‚îÇ    ‚îú‚îÄ‚îÄ Event
‚îÇ    ‚îÇ            ‚îÇ    ‚îî‚îÄ‚îÄ EventObject
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ enums
‚îÇ    ‚îÇ            ‚îÇ    ‚îú‚îÄ‚îÄ ApiCallback
‚îÇ    ‚îÇ            ‚îÇ    ‚îî‚îÄ‚îÄ ApiMethod
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ response
‚îÇ    ‚îÇ            ‚îÇ    ‚îú‚îÄ‚îÄ DefaultResponse
‚îÇ    ‚îÇ            ‚îÇ    ‚îî‚îÄ‚îÄ Response 
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ service    
‚îÇ    ‚îÇ            ‚îÇ    ‚îî‚îÄ‚îÄ VkApiService
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ AppConfig.java
‚îÇ    ‚îÇ            ‚îú‚îÄ‚îÄ Constatns.java            
‚îÇ    ‚îÇ            ‚îî‚îÄ‚îÄ VkBotApplication.java       
‚îÇ    ‚îî‚îÄ‚îÄ resources
‚îÇ         ‚îú‚îÄ‚îÄ application.yaml                      
‚îÇ         ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ ...
```

#
##### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É
–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–±–ª–∏–∫–∞ __–°–æ–æ–±—â–µ–Ω–∏—è > –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–æ—Ç–∞__ –∏ –≤–∫–ª—é—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–æ–≤ :white_check_mark:. –ü–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ __–ù–∞—Å—Ç—Ä–æ–π–∫–∏ > –†–∞–±–æ—Ç–∞ —Å API__ –∏ —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞.

<p align="center">
  <img src="https://i.imgur.com/bXMXKz4.png" />
</p>

–î–∞–ª–µ–µ –ø–µ—Ä–µ–π—Ç–∏ –≤ Callback API –∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

#
##### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–í __application.yaml__ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å:
+ –°—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
+ –ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞
+ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (_–ü–æ–∑–≤–æ–ª–∏—Ç –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –∏–º–µ–Ω–Ω–æ –æ—Ç vk_)

```yml
token:
  confirmation: ${your.confirmation.token}
  access: ${your.access.token}

secret:
  key: ${your.access.token}

server:
  port: ${your.server.port}
```


